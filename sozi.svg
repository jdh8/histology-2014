<?xml version="1.0" encoding="UTF-8"?>
<!--
	Copyright (C) 2014 Chen-Pang He <jdh8@ms63.hinet.net>

	This file is free software: you can redistribute it and/or modify
	it under the terms of the GNU General Public License as published by
	the Free Software Foundation, either version 3 of the License, or
	(at your option) any later version.

	This file is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU General Public License for more details.

	You should have received a copy of the GNU General Public License
	along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<?xml-stylesheet type="text/css" href="https://fonts.googleapis.com/css?family=Lato"?>
<svg version="1.1" viewBox="0 0 1280 960" xml:lang="zh-Hant"
	xmlns="http://www.w3.org/2000/svg"
	xmlns:sozi="http://sozi.baierouge.fr"
	xmlns:xlink="http://www.w3.org/1999/xlink">
<title>組織型態學：小鼠腦下垂體型態觀察</title>
<metadata>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
	<rdf:Description xmlns="http://purl.org/dc/terms/">
		<creator>
			<Person xmlns="http://xmlns.com/foaf/0.1/" rdf:about="http://jdh8.org/">
				<rdf:value>何震邦</rdf:value>
				<mbox_sha1sum>9288e00d54e69a37d8c0a598bc377774e9f68b3a</mbox_sha1sum>
				<weblog rdf:resource="http://jdh8.org/" />
			</Person>
		</creator>
		<subject>石蠟切片</subject>
		<subject>H&amp;E</subject>
		<subject>Masson's trichrome</subject>
		<type rdf:resource="http://purl.org/dc/dcmitype/InteractiveResource" />
		<license rdf:resource="https://www.gnu.org/licenses/gpl.html" />
		<license rdf:resource="https://creativecommons.org/licenses/by-sa/4.0/" />
	</rdf:Description>
</rdf:RDF>
</metadata>
<style type="text/css">
rect {
	fill: none;
}
text {
	fill: #2b2b2b;
	font-size: 24px;
	text-anchor: middle;
}
#sozi-toc text {
	text-anchor: start;
}

a,
#ruler {
	fill: #24890d;
	text-decoration: underline;
}
a:active,
a:hover,
#ruler:hover {
	fill: #41a62a;
	text-decoration: none;
}
a > image {
	opacity: .8;
}
a:active > image,
a:hover  > image {
	opacity: 1;
}

.h {
	font-size: 40px;
	font-weight: bold;
}
.li {
	text-anchor: start;
}
#subtitle {
	font-size: 32px;
	font-weight: bold;
}

.red {
	fill: #f66;
}
.red:hover {
	fill: #f33;
}
.blue {
	fill: #66f;
}
.blue:hover {
	fill: #33f;
}
</style>
<defs>
	<symbol id="rulers">
		<rect id="ruler" width="29.7" height="5.94" x="49" y="380" />
		<use xlink:href="#ruler" x="298" />
	</symbol>
</defs>
<rect id="panorama" width="1280" height="960" />
<g>
	<rect id="title" width="640" height="480" />
	<circle cx="100" cy="300" r="60" class="red" />
	<circle cx="500" cy="180" r="50" class="blue" />
	<text x="320" y="64" class="h">
		<a xlink:href="http://my2.tmu.edu.tw/course/16687" xlink:show="new">
			組織型態學
		</a>
	</text>
	<text x="320" y="128" id="subtitle">小鼠腦下垂體型態觀察</text>
	<text x="320" y="300">
		<a xlink:href="http://www.tmu.edu.tw/" xlink:show="new">
			臺北醫學大學
		</a>
	</text>
	<text x="320" y="340">
		<a xlink:href="http://jdh8.org/" xlink:show="new">
			B101100025 何震邦
		</a>
	</text>
	<text x="320" y="390">指導：周綉珠 老師</text>
	<a xlink:href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh_TW" xlink:show="new">
		<image x="260" y="420" width="120" height="42" xlink:href="image/by-sa.svg" />
	</a>
</g>
<g transform="matrix(0.5 0 0 0.5 640 0)">
	<rect id="summary" width="640" height="480">
		<sozi:audio sozi:src="audio/2.ogg" sozi:type="audio/ogg" sozi:start-frame="2" sozi:stop-frame="3" />
	</rect>
	<text x="320" y="64" class="h">摘要</text>
	<text class="li" x="40" y="120"><a xlink:href="hist.pdf" xlink:show="new">書面報告</a>中猜測該組織為骨骼肌</text>
	<text class="li" x="60" y="160">老師表示：</text>
	<polygon class="red" points="320,220 260,160 240,180 300,240 240,300 260,320 320,260 380,320 400,300 340,240 400,180 380,160" />
	<text class="li" x="40" y="400">
		新猜測：腦下垂體
		[<a xlink:href="http://histology.med.umich.edu/node/334" xlink:show="new">來源</a>]
	</text>
</g>
<g transform="matrix(0.5 0 0 0.5 960 0)">
	<rect id="section" width="640" height="480">
		<sozi:audio sozi:src="audio/3.ogg" sozi:type="audio/ogg" sozi:start-frame="3" sozi:stop-frame="4" />
	</rect>
	<text x="320" y="64" class="h">老生常談</text>
	<text class="li" x="40" y="120">固定：避免組織降解</text>
	<text class="li" x="40" y="160">處理：把水取代成基質</text>
	<text class="li" x="40" y="200">包埋：用硬的基質包住樣本</text>
	<text class="li" x="40" y="240">切片：有點薄又不會太薄</text>
	<text class="li" x="40" y="280">染色：使不同組織產生對比</text>
</g>
<g transform="matrix(0.5 0 0 0.5 960 240)">
	<rect id="paraffin" width="640" height="480">
		<sozi:audio sozi:src="audio/4.ogg" sozi:type="audio/ogg" sozi:start-frame="4" sozi:stop-frame="5" />
	</rect>
	<text x="320" y="64" class="h">石蠟切片</text>
	<text class="li" x="40" y="120">固定：10% neutral buffered formalin</text>
	<text class="li" x="40" y="160">處理：水→酒精→二甲苯→石蠟</text>
	<text class="li" x="40" y="200">包埋：石蠟</text>
	<text class="li" x="40" y="240">切片：約 5 μm 厚</text>
	<text class="li" x="40" y="280">染色：H&amp;E, Masson's trichrome</text>
</g>
<g transform="translate(0 480)">
	<title>物鏡 4x</title>
	<rect id="Obj-4x" width="640" height="480">
		<sozi:audio sozi:src="audio/5.ogg" sozi:type="audio/ogg" sozi:start-frame="5" sozi:stop-frame="6" />
	</rect>
	<text class="h" x="320" y="100">物鏡 4x</text>
	<text class="li" x="40" y="150">尺規長 25 μm，寬 5 μm。</text>
	<image xlink:href="image/HE-4x.jpg"  id="HE-4x"  width="256" height="192" x="43"  y="200" />
	<image xlink:href="image/Tri-4x.jpg" id="Tri-4x" width="256" height="192" x="341" y="200" />
	<rect width="256" height="192" x="43"  y="200">
		<sozi:audio sozi:src="audio/6.ogg" sozi:type="audio/ogg" sozi:start-frame="6" sozi:stop-frame="7" />
	</rect>
	<rect width="256" height="192" x="341" y="200">
		<sozi:audio sozi:src="audio/7.ogg" sozi:type="audio/ogg" sozi:start-frame="7" sozi:stop-frame="8" />
	</rect>
	<use xlink:href="#rulers" />
</g>
<g transform="matrix(0.4 0 0 0.4 640 480)">
	<title>物鏡 10x</title>
	<rect id="Obj-10x" width="640" height="480">
		<sozi:audio sozi:src="audio/8.ogg" sozi:type="audio/ogg" sozi:start-frame="8" sozi:stop-frame="11" />
	</rect>
	<text class="h" x="320" y="100">物鏡 10x</text>
	<text class="li" x="40" y="150">尺規長 10 μm，寬 2 μm。</text>
	<image xlink:href="image/HE-10x.jpg"    id="HE-10x"  width="256" height="192" x="43"  y="200" />
	<image xlink:href="image/Tri-10x-1.jpg" id="Tri-10x" width="256" height="192" x="341" y="200" />
	<use xlink:href="#rulers" />
</g>
<g transform="matrix(0.2 0 0 0.2 896 480)">
	<title>物鏡 20x</title>
	<rect id="Obj-20x" width="640" height="480">
		<sozi:audio sozi:src="audio/11.ogg" sozi:type="audio/ogg" sozi:start-frame="11" sozi:stop-frame="22" />
	</rect>
	<text class="h" x="320" y="100">物鏡 20x</text>
	<text class="li" x="40" y="150">尺規長 5 μm，寬 1 μm。</text>
	<image xlink:href="image/HE-20x-2.jpg"  id="HE-20x"  width="256" height="192" x="43"  y="200" />
	<image xlink:href="image/Tri-20x-2.jpg" id="Tri-20x" width="256" height="192" x="341" y="200" />
	<use xlink:href="#rulers" />
</g>
<g transform="matrix(0.1 0 0 0.1 1024 480)">
	<title>物鏡 40x</title>
	<rect id="Obj-40x-1" width="640" height="480" />
	<rect id="Obj-40x-2" width="640" height="480" y="420" />
	<text class="h" x="320" y="100">物鏡 40x</text>
	<text class="li" x="40" y="150">尺規長 2.5 μm，寬 0.5 μm。</text>
	<image xlink:href="image/HE-40x-1.jpg"  id="HE-40x-1"  width="256" height="192" x="43"  y="200" />
	<image xlink:href="image/Tri-40x-1.jpg" id="Tri-40x-1" width="256" height="192" x="341" y="200" />
	<image xlink:href="image/HE-40x-2.jpg"  id="HE-40x-2"  width="256" height="192" x="43"  y="440" />
	<image xlink:href="image/Tri-40x-2.jpg" id="Tri-40x-2" width="256" height="192" x="341" y="440" />
	<image xlink:href="image/HE-40x-3.jpg"  id="HE-40x-3"  width="256" height="192" x="43"  y="680" />
	<image xlink:href="image/Tri-40x-3.jpg" id="Tri-40x-3" width="256" height="192" x="341" y="680" />
	<use xlink:href="#rulers" />
	<use xlink:href="#rulers" y="240" />
	<use xlink:href="#rulers" y="480" />
</g>
<style type="text/css">
/*
 * Sozi - A presentation tool using the SVG standard
 *
 * Copyright (C) 2010-2013 Guillaume Savaton
 *
 * This program is dual licensed under the terms of the MIT license
 * or the GNU General Public License (GPL) version 3.
 * A copy of both licenses is provided in the doc/ folder of the
 * official release of Sozi.
 * 
 * See http://sozi.baierouge.fr/wiki/en:license for details.
 */
#sozi-toc text {
	fill: #eff;
	font-family: Verdana, sans-serif;
	font-size: 12pt;
}
#sozi-toc text:hover {
	fill: #0cf;
	cursor: pointer;
}
#sozi-toc text.sozi-toc-current {
	fill: #fa4;
}
#sozi-toc-background {
	stroke: #222;
	stroke-opacity: 0.1;
	stroke-width: 10;
	fill: #222;
	fill-opacity: 0.9;
}
.sozi-toc-arrow {
	fill: #eff;
	fill-opacity: 0.75;
	stroke: none;
}
.sozi-toc-arrow:hover {
	fill: #0cf;
}
#sozi-framenumber circle {
	stroke: #222;
	stroke-opacity: 0.1;
	stroke-width: 4;
	fill: #222;
	fill-opacity: 0.9;
}
#sozi-framenumber text {
	fill: #eff;
	font-family: Verdana, sans-serif;
	font-size: 12pt;
}
</style>
<sozi:frame id="1"  sozi:clip="false" sozi:hide="false" sozi:refid="title"     sozi:title="組織型態學" />
<sozi:frame id="2"  sozi:clip="false" sozi:hide="false" sozi:refid="summary"   sozi:title="摘要" />
<sozi:frame id="3"  sozi:clip="false" sozi:hide="false" sozi:refid="section"   sozi:title="老生常談" />
<sozi:frame id="4"  sozi:clip="false" sozi:hide="false" sozi:refid="paraffin"  sozi:title="石蠟切片" />
<sozi:frame id="5"  sozi:clip="false" sozi:hide="false" sozi:refid="Obj-4x"    sozi:title="物鏡 4x" />
<sozi:frame id="6"  sozi:clip="false" sozi:hide="false" sozi:refid="HE-4x"     sozi:title="H&amp;E 4x" />
<sozi:frame id="7"  sozi:clip="false" sozi:hide="false" sozi:refid="Tri-4x"    sozi:title="Masson's trichrome 4x" />
<sozi:frame id="8"  sozi:clip="false" sozi:hide="false" sozi:refid="Obj-10x"   sozi:title="物鏡 10x" />
<sozi:frame id="9"  sozi:clip="false" sozi:hide="false" sozi:refid="HE-10x"    sozi:title="H&amp;E 10x" />
<sozi:frame id="10" sozi:clip="false" sozi:hide="false" sozi:refid="Tri-10x"   sozi:title="Masson's trichrome 10x" />
<sozi:frame id="11" sozi:clip="false" sozi:hide="false" sozi:refid="Obj-20x"   sozi:title="物鏡 20x" />
<sozi:frame id="12" sozi:clip="false" sozi:hide="false" sozi:refid="HE-20x"    sozi:title="H&amp;E 20x" />
<sozi:frame id="13" sozi:clip="false" sozi:hide="false" sozi:refid="Tri-20x"   sozi:title="Masson's trichrome 20x" />
<sozi:frame id="14" sozi:clip="false" sozi:hide="false" sozi:refid="Obj-40x-1" sozi:title="物鏡 40x (1)" />
<sozi:frame id="15" sozi:clip="false" sozi:hide="false" sozi:refid="Obj-40x-2" sozi:title="物鏡 40x (2)" />
<sozi:frame id="16" sozi:clip="false" sozi:hide="false" sozi:refid="HE-40x-1"  sozi:title="H&amp;E 40x (1)" />
<sozi:frame id="17" sozi:clip="false" sozi:hide="false" sozi:refid="HE-40x-2"  sozi:title="H&amp;E 40x (2)" />
<sozi:frame id="18" sozi:clip="false" sozi:hide="false" sozi:refid="HE-40x-3"  sozi:title="H&amp;E 40x (3)" />
<sozi:frame id="19" sozi:clip="false" sozi:hide="false" sozi:refid="Tri-40x-1" sozi:title="Masson's trichrome 40x (1)" />
<sozi:frame id="20" sozi:clip="false" sozi:hide="false" sozi:refid="Tri-40x-2" sozi:title="Masson's trichrome 40x (2)" />
<sozi:frame id="21" sozi:clip="false" sozi:hide="false" sozi:refid="Tri-40x-3" sozi:title="Masson's trichrome 40x (3)" />
<sozi:frame id="22" sozi:clip="false" sozi:hide="false" sozi:refid="panorama"  sozi:title="全景" />
<script><![CDATA["use strict"
/*
 * Sozi - A presentation tool using the SVG standard
 *
 * Copyright (C) 2010-2013 Guillaume Savaton
 *
 * This program is dual licensed under the terms of the MIT license
 * or the GNU General Public License (GPL) version 3.
 * A copy of both licenses is provided in the doc/ folder of the
 * official release of Sozi.
 *
 * See http://sozi.baierouge.fr/wiki/en:license for details.
 */
function namespace(b,e,d){var c=b;e.split(".").forEach(function(b){"undefined"===typeof c[b]&&(c[b]={});c=c[b]});d&&d(c,b);return c}namespace(this,"sozi.events",function(b){var e={};b.listen=function(b,c){e.hasOwnProperty(b)||(e[b]=[]);e[b].push(c)};b.fire=function(b){var c=Array.prototype.slice.call(arguments,1);e.hasOwnProperty(b)&&e[b].forEach(function(b){b.apply(null,c)})}});
namespace(this,"sozi.proto",function(b){b.Object={installConstructors:function(){function b(){}b.prototype=this;this.instance=function(){var d=new b;d.construct.apply(d,arguments);return d};this.subtype=function(d){var c=new b;c.augment(d);c.installConstructors();return c}},construct:function(){},augment:function(b){for(var d in b)b.hasOwnProperty(d)&&(this[d]=b[d]);return this},bind:function(b){var d=this;return function(){return b.apply(d,arguments)}}};b.Object.installConstructors()});
namespace(this,"sozi.actions",function(b,e){function d(a,k,b){p.stop();u.viewPorts.player.zoom(0<a?1.05:1/1.05,k,b)}function c(a){p.stop();u.viewPorts.player.rotate(0<a?5:-5)}function h(){sozi.framelist.isVisible()?(sozi.framelist.hide(),p.restart()):(p.stop(),sozi.framelist.show())}function f(a){return u.viewPorts.player.contains(a.clientX,a.clientY)}function n(k){f(k)&&(0===k.button?(w.documentElement.addEventListener("mousemove",a,!1),v=!1,r=k.clientX,x=k.clientY):1===k.button&&h(),k.stopPropagation(),
k.preventDefault())}function a(a){f(a)&&(p.stop(),!v&&(5<Math.abs(a.clientX-r)||5<Math.abs(a.clientY-x))&&(v=!0),v&&(sozi.events.fire("sozi.player.cleanup"),u.viewPorts.player.drag(a.clientX-r,a.clientY-x),r=a.clientX,x=a.clientY),a.stopPropagation())}function k(k){f(k)&&(0===k.button&&w.documentElement.removeEventListener("mousemove",a,!1),k.stopPropagation(),k.preventDefault())}function g(a){f(a)&&(p.moveToPrevious(),a.stopPropagation(),a.preventDefault())}function l(a){f(a)&&(v||1===a.button||
p.moveToNext(),a.stopPropagation(),a.preventDefault())}function m(a){if(f(a)){a||(a=e.event);var k=0;a.wheelDelta?k=a.wheelDelta:a.detail&&(k=-a.detail);0!==k&&(a.shiftKey?c(k):d(k,a.clientX,a.clientY));a.stopPropagation();a.preventDefault()}}function s(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){switch(a.charCode||a.which){case 43:d(1,e.innerWidth/2,e.innerHeight/2);break;case 45:d(-1,e.innerWidth/2,e.innerHeight/2);break;case 61:p.moveToCurrent();break;case 70:case 102:p.showAll();break;case 84:case 116:h();
break;case 82:c(-1);break;case 114:c(1);break;default:return}a.stopPropagation();a.preventDefault()}}function q(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){switch(a.keyCode){case 36:a.shiftKey?p.jumpToFirst():p.moveToFirst();break;case 35:a.shiftKey?p.jumpToLast():p.moveToLast();break;case 38:case 33:case 37:a.shiftKey?p.jumpToPrevious():p.moveToPrevious();break;case 40:case 34:case 39:case 13:case 32:a.shiftKey?p.jumpToNext():p.moveToNext();break;default:return}a.stopPropagation();a.preventDefault()}}
function t(a){a.stopPropagation()}var p=namespace(e,"sozi.player"),u=namespace(e,"sozi.display"),w=e.document,v=!1,r=0,x=0;sozi.events.listen("sozi.display.ready",function(){for(var a=w.getElementsByTagName("a"),b=0;b<a.length;b+=1)a[b].addEventListener("click",t,!1),a[b].addEventListener("contextmenu",t,!1);a=w.documentElement;a.addEventListener("click",l,!1);a.addEventListener("mousedown",n,!1);a.addEventListener("mouseup",k,!1);a.addEventListener("contextmenu",g,!1);a.addEventListener("DOMMouseScroll",
m,!1);e.onmousewheel=m;a.addEventListener("keypress",s,!1);a.addEventListener("keydown",q,!1)})});
namespace(this,"sozi.animation",function(b,e){function d(){0<a.length?(h&&h(d),a.forEach(function(a){a.step(f())})):h||e.clearInterval(n)}function c(){h?h(d):n=e.setInterval(function(){d(f())},40)}var h=e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame,f=function(){return e.performance&&e.performance.now?e.performance.now():Date.now()};b.setAnimationFrameHandlers=function(a,b){h=a;f=b};var n,a=[];b.Animator=sozi.proto.Object.subtype({construct:function(){this.durationMs=
0;this.data=null;this.initialTime=0;this.started=!1},start:function(k,b){this.durationMs=k;this.data=b;this.initialTime=f();this.onStep(0);this.started||(this.started=!0,a.push(this),1===a.length&&c())},stop:function(){this.started&&(a.splice(a.indexOf(this),1),this.started=!1)},step:function(a){a-=this.initialTime;if(a>=this.durationMs)this.stop(),this.onStep(1),this.onDone();else this.onStep(a/this.durationMs)},onStep:function(a){},onDone:function(){}});b.profiles={linear:function(a){return a},
accelerate:function(a){return Math.pow(a,3)},"strong-accelerate":function(a){return Math.pow(a,5)},decelerate:function(a){return 1-Math.pow(1-a,3)},"strong-decelerate":function(a){return 1-Math.pow(1-a,5)},"accelerate-decelerate":function(a){var b=Math.pow(2*(.5>=a?a:1-a),3)/2;return.5>=a?b:1-b},"strong-accelerate-decelerate":function(a){var b=Math.pow(2*(.5>=a?a:1-a),5)/2;return.5>=a?b:1-b},"decelerate-accelerate":function(a){var b=(1-Math.pow(1-2*(.5>=a?a:1-a),2))/2;return.5>=a?b:1-b},"strong-decelerate-accelerate":function(a){var b=
(1-Math.pow(1-2*(.5>=a?a:1-a),3))/2;return.5>=a?b:1-b},"immediate-beginning":function(a){return 1},"immediate-end":function(a){return 1===a?1:0},"immediate-middle":function(a){return.5<=a?1:0}}});
namespace(this,"sozi.display",function(b,e){var d=e.document,c,h,f;b.viewPorts={};var n;b.CameraState=sozi.proto.Object.subtype({construct:function(){this.cx=this.cy=0;this.width=this.height=1;this.angle=0;this.clipped=!0;this.transitionZoomPercent=0;this.transitionProfile=sozi.animation.profiles.linear;this.transitionPath=null},setCenter:function(a,b){this.cx=a;this.cy=b;return this},setSize:function(a,b){this.width=a;this.height=b;return this},setClipped:function(a){this.clipped=a;return this},
setAngle:function(a){this.angle=(a+180)%360-180;return this},setRawAngle:function(a){this.angle=a;return this},setTransitionZoomPercent:function(a){this.transitionZoomPercent=a;return this},setTransitionProfile:function(a){this.transitionProfile=a;return this},setTransitionPath:function(a){this.transitionPath=a;return this},setAtElement:function(a){var b,g,l,m;"rect"===a.nodeName?(b=a.x.baseVal.value,g=a.y.baseVal.value,l=a.width.baseVal.value,m=a.height.baseVal.value):(m=a.getBBox(),b=m.x,g=m.y,
l=m.width,m=m.height);var c=d.documentElement.createSVGPoint();c.x=b+l/2;c.y=g+m/2;a=a.getCTM();c=c.matrixTransform(a);b=Math.sqrt(a.a*a.a+a.b*a.b);return this.setCenter(c.x,c.y).setSize(l*b,m*b).setAngle(180*Math.atan2(a.b,a.a)/Math.PI)},setAtState:function(a){return this.setCenter(a.cx,a.cy).setSize(a.width,a.height).setAngle(a.angle).setClipped(a.clipped).setTransitionZoomPercent(a.transitionZoomPercent).setTransitionProfile(a.transitionProfile).setTransitionPath(a.transitionPath)},interpolatableAttributes:["width",
"height","angle"],interpolate:function(a,b,g,l,m){for(var c=1-g,d=0;d<this.interpolatableAttributes.length;d+=1){var e=this.interpolatableAttributes[d];this[e]=b[e]*g+a[e]*c}d=m?a.transitionPath:b.transitionPath;l&&d?(l=d.getTotalLength(),m?(m=d.getPointAtLength(l),e=d.getPointAtLength(0),d=d.getPointAtLength(l*c)):(m=d.getPointAtLength(0),e=d.getPointAtLength(l),d=d.getPointAtLength(l*g)),this.cx=d.x+(b.cx-e.x)*g+(a.cx-m.x)*c,this.cy=d.y+(b.cy-e.y)*g+(a.cy-m.y)*c):(this.cx=b.cx*g+a.cx*c,this.cy=
b.cy*g+a.cy*c)}});b.Camera=b.CameraState.subtype({construct:function(a,k){b.CameraState.construct.call(this);this.viewPort=a;this.svgClipRect=d.createElementNS("http://www.w3.org/2000/svg","rect");var c=d.createElementNS("http://www.w3.org/2000/svg","clipPath");c.setAttribute("id","sozi-clip-path-"+a.id+"-"+k);c.appendChild(this.svgClipRect);a.svgGroup.appendChild(c);c=d.createElementNS("http://www.w3.org/2000/svg","g");c.setAttribute("clip-path","url(#sozi-clip-path-"+a.id+"-"+k+")");a.svgGroup.appendChild(c);
a.isPrimary?(this.svgLayer=d.createElementNS("http://www.w3.org/2000/svg","g"),this.svgLayer.appendChild(d.getElementById(k))):(this.svgLayer=d.createElementNS("http://www.w3.org/2000/svg","use"),this.svgLayer.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+k));c.appendChild(this.svgLayer)},setAtState:function(a){return b.CameraState.setAtState.call(this,a).update()},getScale:function(){return Math.min(this.viewPort.width/this.width,this.viewPort.height/this.height)},rotate:function(a){return this.setAngle(this.angle+
a).update()},zoom:function(a,b,c){return this.setSize(this.width/a,this.height/a).drag((1-a)*(b-this.viewPort.width/2),(1-a)*(c-this.viewPort.height/2))},drag:function(a,b){var c=this.getScale(),l=this.angle*Math.PI/180,d=Math.sin(l),l=Math.cos(l);return this.setCenter(this.cx-(a*l-b*d)/c,this.cy-(a*d+b*l)/c).setClipped(!1).update()},update:function(){var a=this.getScale(),b=this.width*a,c=this.height*a,l=(this.viewPort.width-b)/2,d=(this.viewPort.height-c)/2;this.svgClipRect.setAttribute("x",this.clipped?
l:0);this.svgClipRect.setAttribute("y",this.clipped?d:0);this.svgClipRect.setAttribute("width",this.clipped?b:this.viewPort.width);this.svgClipRect.setAttribute("height",this.clipped?c:this.viewPort.height);this.svgLayer.setAttribute("transform","scale("+a+")translate("+(-this.cx+this.width/2+l/a)+","+(-this.cy+this.height/2+d/a)+")rotate("+-this.angle+","+this.cx+","+this.cy+")");return this}});b.ViewPort=sozi.proto.Object.subtype({construct:function(a,c,g){this.id=a;b.viewPorts[a]=this;if(this.isPrimary=
!!g){if(n)throw"Failed to create a primary viewport. A primary viewport already exists.";n=this}this.svgGroup=d.createElementNS("http://www.w3.org/2000/svg","g");this.svgGroup.setAttribute("class","sozi-viewport");this.svgGroup.setAttribute("id","sozi-viewport-"+a);d.documentElement.appendChild(this.svgGroup);this.setLocation(0,0).setSize(e.innerWidth,e.innerHeight);this.cameras={};c.forEach(function(a){this.cameras[a]=b.Camera.instance(this,a)},this)},setSize:function(a,b){this.width=a;this.height=
b;return this},setLocation:function(a,b){this.x=a;this.y=b;return this},contains:function(a,b){return a>=this.x&&a<this.x+this.width&&b>=this.y&&b<this.y+this.height},getDocumentState:function(){var a=b.CameraState.instance().setCenter(c.x+c.width/2,c.y+c.height/2).setSize(c.width,c.height).setClipped(!1),k={},d;for(d in this.cameras)k[d]=a;return k},update:function(){this.svgGroup.setAttribute("transform","translate("+this.x+","+this.y+")");for(var a in this.cameras)this.cameras[a].update();return this},
showFrame:function(a){for(var b in a.states)this.cameras[b].setAtState(a.states[b]);return this},drag:function(a,b){for(var c in this.cameras)this.cameras[c].drag(a,b);return this},zoom:function(a,b,c){for(var l in this.cameras)this.cameras[l].zoom(a,b,c);return this},rotate:function(a){for(var b in this.cameras)this.cameras[b].rotate(a);return this},onWindowResize:function(a,b){this.setLocation(this.x*a,this.y*b).setSize(this.width*a,this.height*b).update()}});sozi.events.listen("sozi.document.ready",
function(){var a=d.documentElement;c=a.getBBox();h=e.innerWidth;f=e.innerHeight;a.setAttribute("width",h);a.setAttribute("height",f);sozi.events.fire("sozi.display.ready")});e.addEventListener("resize",function(){var a=d.documentElement;a.setAttribute("width",e.innerWidth);a.setAttribute("height",e.innerHeight);for(var c in b.viewPorts)b.viewPorts[c].onWindowResize(e.innerWidth/h,e.innerHeight/f);h=e.innerWidth;f=e.innerHeight},!1)});
namespace(this,"sozi.document",function(b,e){function d(a,b){return a.getAttributeNS("http://sozi.baierouge.fr",b)||n[b]}function c(a,b,c){a=a.states[b]=a.states[b]||sozi.display.CameraState.instance();("undefined"===typeof a.transitionZoomPercent||c.hasAttributeNS("http://sozi.baierouge.fr","transition-zoom-percent"))&&a.setTransitionZoomPercent(parseInt(d(c,"transition-zoom-percent"),10));("undefined"===typeof a.transitionProfile||c.hasAttributeNS("http://sozi.baierouge.fr","transition-profile"))&&
a.setTransitionProfile(sozi.animation.profiles[d(c,"transition-profile")]);("undefined"===typeof a.transitionPath||c.hasAttributeNS("http://sozi.baierouge.fr","transition-path"))&&(b=f.getElementById(c.getAttributeNS("http://sozi.baierouge.fr","transition-path")))&&"path"===b.nodeName&&(a.setTransitionPath(b),"true"===d(c,"transition-path-hide")&&(b.style.visibility="hidden"));c.hasAttributeNS("http://sozi.baierouge.fr","refid")&&(b=f.getElementById(c.getAttributeNS("http://sozi.baierouge.fr","refid")))&&
(a.setAtElement(b),"true"===d(c,"hide")&&(b.style.visibility="hidden"));c.hasAttributeNS("http://sozi.baierouge.fr","clip")&&a.setClipped("true"===d(c,"clip"))}function h(){for(var e=[],h=f.getElementsByTagNameNS("http://sozi.baierouge.fr","layer"),l=0;l<h.length;l+=1){var m=h[l].getAttributeNS("http://sozi.baierouge.fr","group");m&&-1===e.indexOf(m)&&e.push(m)}var s=f.documentElement,q=f.createElementNS("http://www.w3.org/2000/svg","g"),h=Array.prototype.slice.call(s.childNodes);h.forEach(function(c,
l){c.getAttribute?-1!==e.indexOf(c.getAttribute("id"))?(q.firstChild&&(q.setAttribute("id","sozi-wrapper-"+l),b.idLayerList.push("sozi-wrapper-"+l),s.insertBefore(q,c),q=f.createElementNS("http://www.w3.org/2000/svg","g")),b.idLayerList.push(c.getAttribute("id"))):-1!==a.indexOf(c.localName.toLowerCase())&&(s.removeChild(c),q.appendChild(c)):s.removeChild(c)});q.firstChild&&(q.setAttribute("id","sozi-wrapper-"+h.length),b.idLayerList.push("sozi-wrapper-"+h.length),s.appendChild(q));h=Array.prototype.slice.call(f.getElementsByTagNameNS("http://sozi.baierouge.fr",
"frame"));h.sort(function(a,b){var c=parseInt(d(a,"sequence"),10),l=parseInt(d(b,"sequence"),10);return c-l});h.forEach(function(a,l){var m={id:a.getAttribute("id"),title:d(a,"title"),showInFrameList:"true"===d(a,"show-in-frame-list"),sequence:parseInt(d(a,"sequence"),10),timeoutEnable:"true"===d(a,"timeout-enable"),timeoutMs:parseInt(d(a,"timeout-ms"),10),transitionDurationMs:parseInt(d(a,"transition-duration-ms"),10),states:{}};b.idLayerList.forEach(function(d){0===l||-1!==d.search("sozi-wrapper-[0-9]+")?
c(m,d,a):(m.states[d]=sozi.display.CameraState.instance()).setAtState(b.frames[b.frames.length-1].states[d])});Array.prototype.slice.call(a.getElementsByTagNameNS("http://sozi.baierouge.fr","layer")).forEach(function(a){var l=a.getAttributeNS("http://sozi.baierouge.fr","group");l&&-1!==b.idLayerList.indexOf(l)&&c(m,l,a)});for(var e in m.states)if(m.states.hasOwnProperty(e)){b.frames.push(m);break}})}var f=e.document,n={title:"Untitled",sequence:"0",hide:"true",clip:"true","show-in-frame-list":"true",
"timeout-enable":"false","timeout-ms":"5000","transition-duration-ms":"1000","transition-zoom-percent":"0","transition-profile":"linear","transition-path-hide":"true"},a="g image path rect circle ellipse line polyline polygon text clippath".split(" ");b.frames=[];b.idLayerList=[];b.getFrameIndexForId=function(a){for(var c=0;c<b.frames.length;c+=1)if(b.frames[c].id===a)return c;return-1};e.addEventListener("load",function(){f.documentElement.removeAttribute("viewBox");h();sozi.events.fire("sozi.document.ready")},
!1)});
namespace(this,"sozi.framelist",function(b,e){function d(c){for(var l=c.relatedTarget,d=a.documentElement;l&&l!==k&&l!==d;)l=l.parentNode;l!==k&&(b.hide(),sozi.player.restart(),c.stopPropagation())}function c(a){var b=g.getCTM().f;b<=-e.innerHeight/2?b+=e.innerHeight/2:0>b&&(b=0);g.setAttribute("transform","translate(0,"+b+")");a.stopPropagation()}function h(a){var b=g.getCTM().f;b+l>=3*e.innerHeight/2?b-=e.innerHeight/2:b+l>e.innerHeight+10&&(b=e.innerHeight-l-20);g.setAttribute("transform","translate(0,"+
b+")");a.stopPropagation()}function f(a){return function(b){sozi.player.previewFrame(a);b.stopPropagation()}}function n(a){a.stopPropagation()}var a=e.document,k,g,l=0,m,s,q,t,p,u;b.show=function(){a.documentElement.appendChild(k);q=p;t=s;u.start(300)};b.hide=function(){q=p;t=m;u.start(300)};b.isVisible=function(){return t===s};sozi.events.listen("sozi.player.ready",function(){k=a.createElementNS("http://www.w3.org/2000/svg","g");k.setAttribute("id","sozi-toc");a.documentElement.appendChild(k);g=
a.createElementNS("http://www.w3.org/2000/svg","g");k.appendChild(g);var b=a.createElementNS("http://www.w3.org/2000/svg","rect");b.setAttribute("id","sozi-toc-background");b.setAttribute("x",5);b.setAttribute("y",5);b.setAttribute("rx",5);b.setAttribute("ry",5);b.addEventListener("click",n,!1);b.addEventListener("mousedown",n,!1);b.addEventListener("mouseout",d,!1);g.appendChild(b);var e=0;sozi.document.frames.forEach(function(b,c){if(b.showInFrameList){var d=a.createElementNS("http://www.w3.org/2000/svg",
"text");d.appendChild(a.createTextNode(b.title));d.setAttribute("id","sozi-toc-"+b.id);g.appendChild(d);c===sozi.player.currentFrameIndex&&d.setAttribute("class","sozi-toc-current");var m=d.getBBox().width;l+=d.getBBox().height;m>e&&(e=m);d.setAttribute("x",10);d.setAttribute("y",l+5);d.addEventListener("click",f(c),!1);d.addEventListener("mousedown",n,!1)}});var r=a.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","sozi-toc-arrow");r.setAttribute("d","M"+(e+15)+",25 l20,0 l-10,-15 z");
r.addEventListener("click",c,!1);r.addEventListener("mousedown",n,!1);k.appendChild(r);r=a.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","sozi-toc-arrow");r.setAttribute("d","M"+(e+15)+",35 l20,0 l-10,15 z");r.addEventListener("click",h,!1);r.addEventListener("mousedown",n,!1);k.appendChild(r);b.setAttribute("width",e+35);b.setAttribute("height",l+10);m=-e-45;s=0;p=t=m;k.setAttribute("transform","translate("+m+",0)");u=sozi.animation.Animator.instance().augment({onStep:function(a){a=
sozi.animation.profiles.decelerate(a);p=t*a+q*(1-a);k.setAttribute("transform","translate("+p+",0)")}})});sozi.events.listen("sozi.player.cleanup",b.hide);sozi.events.listen("sozi.player.framechange",function(b){Array.prototype.slice.call(a.getElementsByClassName("sozi-toc-current")).forEach(function(a){a.removeAttribute("class")});b=sozi.document.frames[b];b.showInFrameList&&a.getElementById("sozi-toc-"+b.id).setAttribute("class","sozi-toc-current")})});
namespace(this,"sozi.framenumber",function(b,e){var d=e.document,c,h,f,n;sozi.events.listen("sozi.player.ready",function(){c=d.createElementNS("http://www.w3.org/2000/svg","g");h=d.createElementNS("http://www.w3.org/2000/svg","text");n=d.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("id","sozi-framenumber");n.setAttribute("cx",0);n.setAttribute("cy",0);c.appendChild(n);f=d.createTextNode(sozi.player.currentFrameIndex+1);h.setAttribute("text-anchor","middle");h.setAttribute("dominant-baseline",
"central");h.setAttribute("x",0);h.setAttribute("y",0);h.appendChild(f);c.appendChild(h);d.documentElement.appendChild(c);var a=h.getBBox(),a=.75*Math.max(a.width,a.height),b=1.25*a;n.setAttribute("r",a);c.setAttribute("transform","translate("+b+","+b+")")});sozi.events.listen("sozi.player.framechange",function(a){f.nodeValue=a+1})});
namespace(this,"sozi.links",function(b,e){function d(b){return function(d){sozi.player.moveToFrame(b);d.preventDefault();d.stopPropagation()}}sozi.events.listen("sozi.document.ready",function(){for(var b=e.document.getElementsByTagNameNS("http://www.w3.org/2000/svg","a"),h=0;h<b.length;h+=1){var f=b[h].getAttributeNS("http://www.w3.org/1999/xlink","href");f&&"#"===f[0]&&b[h].addEventListener("click",d(sozi.location.getFrameIndexForHash(f)),!1)}})});
namespace(this,"sozi.location",function(b,e){var d=!1;b.getFrameIndex=function(){return b.getFrameIndexForHash(e.location.hash)};b.getFrameIndexForHash=function(b){b=b?b.slice(1):"1";b=/^[0-9]+$/.test(b)?parseInt(b,10)-1:sozi.document.getFrameIndexForId(b);return 0>b?0:b>=sozi.document.frames.length?sozi.document.frames.length-1:b};e.addEventListener("hashchange",function(){var c=b.getFrameIndex();d||sozi.player.moveToFrame(c);d=!1},!1);sozi.events.listen("sozi.player.framechange",function(b){d=!0;
e.location.hash="#"+sozi.document.frames[b].id})});
namespace(this,"sozi.player",function(b,e){function d(){if(sozi.document.frames[b.currentFrameIndex].timeoutEnable){g=!0;var a=(b.currentFrameIndex+1)%sozi.document.frames.length;n=e.setTimeout(function(){b.moveToFrame(a)},sozi.document.frames[b.currentFrameIndex].timeoutMs)}}function c(a,b,c){var d={ss:(0>a?Math.max(b,c):Math.min(b,c))*(100-a)/100,ts:.5,k:0};if(0!==a){a=b-c;b-=d.ss;c-=d.ss;if(0!==a){c=Math.sqrt(b*c);var e=(b-c)/a;d.ts=0<e&&1>=e?e:(b+c)/a}d.k=b/d.ts/d.ts}return d}var h,f,n,a=0;b.currentFrameIndex=
0;var k=!1,g=!1;b.startFromIndex=function(c){k=!0;g=!1;a=c;b.currentFrameIndex=c;h.showFrame(sozi.document.frames[c]);d()};b.restart=function(){b.startFromIndex(b.currentFrameIndex)};b.stop=function(){f.stop();g&&(e.clearTimeout(n),g=!1);k=!1;a=b.currentFrameIndex};b.jumpToFrame=function(c){b.stop();sozi.events.fire("sozi.player.cleanup");a=c;b.currentFrameIndex=c;h.showFrame(sozi.document.frames[c]);sozi.events.fire("sozi.player.framechange",c)};b.getAnimationData=function(a,b,d,e,h,k){var f={},
g;for(g in a){f[g]={initialState:sozi.display.CameraState.instance(),finalState:sozi.display.CameraState.instance(),useTransitionPath:h,reverseTransitionPath:k};f[g].profile=e||b[g].transitionProfile;f[g].initialState.setAtState(a[g]);b.hasOwnProperty(g)?f[g].finalState.setAtState(b[g]):f[g].finalState.setAtState(a[g]);180<f[g].finalState.angle-f[g].initialState.angle?f[g].finalState.setRawAngle(f[g].finalState.angle-360):-180>f[g].finalState.angle-f[g].initialState.angle&&f[g].initialState.setRawAngle(f[g].initialState.angle-
360);var n=d||b[g].transitionZoomPercent;n&&b.hasOwnProperty(g)&&(f[g].zoomWidth=c(n,a[g].width,b[g].width),f[g].zoomHeight=c(n,a[g].height,b[g].height))}return f};b.previewFrame=function(a){b.currentFrameIndex=a;f.start(500,b.getAnimationData(h.cameras,sozi.document.frames[a].states,-10,sozi.animation.profiles.linear),!1,!1);sozi.events.fire("sozi.player.framechange",a)};b.moveToFrame=function(a){g&&(e.clearTimeout(n),g=!1);var c,d,q,t,p;a===(b.currentFrameIndex-1)%sozi.document.frames.length?(c=
sozi.document.frames[b.currentFrameIndex].transitionDurationMs,q=d=void 0,p=t=!0):(a===(b.currentFrameIndex+1)%sozi.document.frames.length?(c=sozi.document.frames[a].transitionDurationMs,q=d=void 0,t=!0):(c=500,d=-10,q=sozi.animation.profiles.linear,t=!1),p=!1);sozi.events.fire("sozi.player.cleanup");k=!0;b.currentFrameIndex=a;f.start(c,b.getAnimationData(h.cameras,sozi.document.frames[a].states,d,q,t,p));sozi.events.fire("sozi.player.framechange",a)};b.jumpToFirst=function(){b.jumpToFrame(0)};b.moveToFirst=
function(){b.moveToFrame(0)};b.jumpToPrevious=function(){var c=b.currentFrameIndex;if(!f.started||a<=b.currentFrameIndex)c-=1;0<=c&&b.jumpToFrame(c)};b.moveToPrevious=function(){for(var a=b.currentFrameIndex-1;0<=a;a-=1){var c=sozi.document.frames[a];if(!c.timeoutEnable||0!==c.timeoutMs){b.moveToFrame(a);break}}};b.jumpToNext=function(){var c=b.currentFrameIndex;if(!f.started||a>=b.currentFrameIndex)c+=1;c<sozi.document.frames.length&&b.jumpToFrame(c)};b.moveToNext=function(){(b.currentFrameIndex<
sozi.document.frames.length-1||sozi.document.frames[b.currentFrameIndex].timeoutEnable)&&b.moveToFrame((b.currentFrameIndex+1)%sozi.document.frames.length)};b.jumpToLast=function(){b.jumpToFrame(sozi.document.frames.length-1)};b.moveToLast=function(){b.moveToFrame(sozi.document.frames.length-1)};b.moveToCurrent=function(){b.moveToFrame(b.currentFrameIndex)};b.showAll=function(){b.stop();sozi.events.fire("sozi.player.cleanup");f.start(500,b.getAnimationData(h.cameras,h.getDocumentState(),-10,sozi.animation.profiles.linear,
!1,!1))};b.onAnimationStep=function(a,b){for(var c in b){var d=h.cameras[c];d.interpolate(b[c].initialState,b[c].finalState,b[c].profile(a),b[c].useTransitionPath,b[c].reverseTransitionPath);var e;b[c].zoomWidth&&0!==b[c].zoomWidth.k&&(e=a-b[c].zoomWidth.ts,d.width=b[c].zoomWidth.k*e*e+b[c].zoomWidth.ss);b[c].zoomHeight&&0!==b[c].zoomHeight.k&&(e=a-b[c].zoomHeight.ts,d.height=b[c].zoomHeight.k*e*e+b[c].zoomHeight.ss);d.setClipped(b[c].finalState.clipped)}h.update()};f=sozi.animation.Animator.instance().augment({onStep:function(a){b.onAnimationStep(a,
this.data)},onDone:function(){for(var c in this.data)h.cameras[c].setAtState(this.data[c].finalState);h.update();a=b.currentFrameIndex;k&&d()}});sozi.events.listen("sozi.display.ready",function(){h=sozi.display.ViewPort.instance("player",sozi.document.idLayerList,!0);b.startFromIndex(sozi.location.getFrameIndex());e.setTimeout(h.bind(h.update),1);sozi.events.fire("sozi.player.ready")})});
this.addEventListener("load",function(){function b(a){a.stopPropagation()}function e(a,b,c){sozi.events.listen("sozi.player.framechange",function(d){d=sozi.document.frames[d].id;d===b?a.play():d===c&&a.pause()})}var d=this.document,c=[],h,f,n,a,k,g,l,m,s;c.push(d.getElementsByTagNameNS("http://sozi.baierouge.fr","video"));c.push(d.getElementsByTagNameNS("http://sozi.baierouge.fr","audio"));h=[];for(a=0;a<c.length;a+=1)for(f=0;f<c[a].length;f+=1){k=c[a][f].parentNode;s=d.createElementNS("http://www.w3.org/1999/xhtml",
"source");s.setAttribute("type",c[a][f].getAttributeNS("http://sozi.baierouge.fr","type"));s.setAttribute("src",c[a][f].getAttributeNS("http://sozi.baierouge.fr","src"));for(n=0;n<h.length&&h[n].rect!==k;n+=1);n===h.length&&(k.setAttribute("visibility","hidden"),m=d.createElementNS("http://www.w3.org/1999/xhtml",c[a][f].localName),m.setAttribute("controls","controls"),"video"===c[a][f].localName&&(m.setAttribute("width",k.getAttribute("width")),m.setAttribute("height",k.getAttribute("height"))),m.addEventListener("click",
b,!1),m.addEventListener("contextmenu",b,!1),l=d.createElementNS("http://www.w3.org/1999/xhtml","html"),l.appendChild(m),g=d.createElementNS("http://www.w3.org/2000/svg","foreignObject"),g.setAttribute("x",k.getAttribute("x")),g.setAttribute("y",k.getAttribute("y")),g.setAttribute("width",k.getAttribute("width")),g.setAttribute("height",k.getAttribute("height")),g.appendChild(l),k.parentNode.insertBefore(g,k.nextSibling),c[a][f].hasAttributeNS("http://sozi.baierouge.fr","start-frame")&&e(m,c[a][f].getAttributeNS("http://sozi.baierouge.fr",
"start-frame"),c[a][f].getAttributeNS("http://sozi.baierouge.fr","stop-frame")),h.push({rect:c[a][f].parentNode,htmlMedia:m}));h[n].htmlMedia.appendChild(s)}},!1);]]></script>
</svg>
